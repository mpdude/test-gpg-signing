on: [ push ]
name: Sign a file

jobs:
    test-sign:
        runs-on: ubuntu-18.04
        steps:
            - uses: actions/checkout@v1
            - run: gpg --verbose --batch --import <<< "${{ secrets.GPG_SIGNING_SUBKEY }}"
            #- run: gpg-preset-passphrase --preset --verbose 90BB3177E7D3B941C1802C20130D4A1337B11AD5 <<< "${{ secrets.GPG_PASSPHRASE }}"
            - run: echo "hello gpg" > some-file
            - run: gpg --batch --pinentry-mode=loopback --passphrase-fd 0 --verbose --detach-sign --armor some-file <<< "${{Â secrets.GPG_PASSPHRASE }}"
            - run: cat some-file.asc
